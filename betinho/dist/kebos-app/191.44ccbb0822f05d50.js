"use strict";(self.webpackChunkkebos_app=self.webpackChunkkebos_app||[]).push([[191],{1191:(X,z,i)=>{i.r(z),i.d(z,{ItemModule:()=>J});var c=i(7152),m=i(3275),f=i(1265),l=i(3075),t=i(5e3),V=i(6529),b=i(1645),g=i(6766),I=i(5270),y=i(1047),S=i(9359),x=i(8054),v=i(9808),C=i(6042),T=i(2643),E=i(2683);const _=["formElement"];function N(n,a){if(1&n&&t.\u0275\u0275element(0,"nz-option",21),2&n){const e=a.$implicit;t.\u0275\u0275property("nzLabel",e.name)("nzValue",e.id)}}function L(n,a){if(1&n){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"button",22),t.\u0275\u0275listener("click",function(){return t.\u0275\u0275restoreView(e),t.\u0275\u0275nextContext().cancel()}),t.\u0275\u0275text(1,"Cancelar"),t.\u0275\u0275elementEnd()}}function j(n,a){1&n&&(t.\u0275\u0275elementStart(0,"button",23),t.\u0275\u0275text(1,"Voltar"),t.\u0275\u0275elementEnd())}function P(n,a){1&n&&(t.\u0275\u0275elementStart(0,"button",24),t.\u0275\u0275text(1,"Confirmar"),t.\u0275\u0275elementEnd())}let F=(()=>{class n{constructor(e,o,r,s,p,K){this.formBuilder=e,this.formService=o,this.route=r,this.router=s,this.notificationService=p,this.service=K,this.routePrevious="item",this.routeAction=m.c,this.tipos=[]}ngOnInit(){this.route.data.subscribe(e=>this.action=e.acao),this.route.params.subscribe(e=>this.param=e.param),this.create=this.action==m.c.Insert,this.edit=this.action==m.c.Edit,this.view=this.action==m.c.View,this.formItem=this.formBuilder.group({tipo:["",l.Validators.required],nome:["",l.Validators.required],quantidade:["",l.Validators.required],bonus:["",l.Validators.required]}),this.service.getTipos().subscribe(e=>this.tipos=e),this.edit&&(this.param?this.service.getIdItem(this.param).subscribe(e=>this.formItem.patchValue(e)):this.returnPage())}saveItem(){const e=this.formService.getValidationsMessages(this.formItem,this.formElement);if(e.length)this.notificationService.warn("Os seguintes campos abaixo devem ser preenchidos corretamente:",this.formService.createValidationList(e));else if(this.formItem.valid){const o=Object.assign({},this.formItem.getRawValue());switch(this.action){case m.c.Insert:this.service.insertItem(o).subscribe(r=>{this.notificationService.success("Cadastro realizado com sucesso!!!",""),this.returnPage()});break;case m.c.Edit:this.service.editItem(this.param,o).subscribe(r=>{this.notificationService.success("Parceiro editado com sucesso!!!",""),this.returnPage()})}}}cancel(){this.formItem.reset(),this.returnPage()}returnPage(){this.router.navigate([`/${this.routePrevious}`])}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(l.FormBuilder),t.\u0275\u0275directiveInject(V.o),t.\u0275\u0275directiveInject(c.gz),t.\u0275\u0275directiveInject(c.F0),t.\u0275\u0275directiveInject(b.g),t.\u0275\u0275directiveInject(g.e))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["app-item-form"]],viewQuery:function(e,o){if(1&e&&t.\u0275\u0275viewQuery(_,5),2&e){let r;t.\u0275\u0275queryRefresh(r=t.\u0275\u0275loadQuery())&&(o.formElement=r.first)}},decls:33,vars:6,consts:[[1,"row"],[1,"col-12","mb-4"],[1,"text-capitalize"],["id","formItem","name","formItem",3,"formGroup","ngSubmit"],["formElement",""],[1,"row","row-cols-1"],[1,"col","mb-3"],["for","nome",1,"form-label","required"],[1,"d-flex","flex-column"],["nz-input","","formControlName","nome","type","text"],["for","tipo",1,"form-label","required"],["nzShowSearch","","nzAllowClear","","nzPlaceHolder","Selecione o tipo","formControlName","tipo"],[3,"nzLabel","nzValue",4,"ngFor","ngForOf"],["for","quantidade",1,"form-label","required"],["nz-input","","formControlName","quantidade","type","number"],["for","bonus",1,"form-label","required"],["nz-input","","formControlName","bonus","type","number"],[1,"col-12","d-flex","justify-content-end","mt-3"],["class","capitalize me-2 btn-kebos-line rounded-pill","nz-button","","nzType","default","type","button","nzSize","default",3,"click",4,"ngIf"],["class","capitalize me-2 btn-kebos-line rounded-pill","nz-button","","nzType","default","type","button","nzSize","default",4,"ngIf"],["class","capitalize btn-kebos rounded-pill","nz-button","","nzType","primary","type","submit","nzSize","default",4,"ngIf"],[3,"nzLabel","nzValue"],["nz-button","","nzType","default","type","button","nzSize","default",1,"capitalize","me-2","btn-kebos-line","rounded-pill",3,"click"],["nz-button","","nzType","default","type","button","nzSize","default",1,"capitalize","me-2","btn-kebos-line","rounded-pill"],["nz-button","","nzType","primary","type","submit","nzSize","default",1,"capitalize","btn-kebos","rounded-pill"]],template:function(e,o){1&e&&(t.\u0275\u0275elementStart(0,"div",0)(1,"h4",1)(2,"span",2),t.\u0275\u0275text(3),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementStart(4,"div",0)(5,"form",3,4),t.\u0275\u0275listener("ngSubmit",function(){return o.saveItem()}),t.\u0275\u0275elementStart(7,"div",5)(8,"div",6)(9,"label",7),t.\u0275\u0275text(10,"Nome"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(11,"div",8),t.\u0275\u0275element(12,"input",9),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(13,"div",6)(14,"label",10),t.\u0275\u0275text(15,"Tipo"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(16,"div",8)(17,"nz-select",11),t.\u0275\u0275template(18,N,1,2,"nz-option",12),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementStart(19,"div",6)(20,"label",13),t.\u0275\u0275text(21,"Quantidade"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(22,"div",8),t.\u0275\u0275element(23,"input",14),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(24,"div",6)(25,"label",15),t.\u0275\u0275text(26,"B\xf4nus"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(27,"div",8),t.\u0275\u0275element(28,"input",16),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementStart(29,"div",17),t.\u0275\u0275template(30,L,2,0,"button",18),t.\u0275\u0275template(31,j,2,0,"button",19),t.\u0275\u0275template(32,P,2,0,"button",20),t.\u0275\u0275elementEnd()()()),2&e&&(t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate1(" ",o.action==o.routeAction.Insert?"Cadastrar":o.action," Item "),t.\u0275\u0275advance(2),t.\u0275\u0275property("formGroup",o.formItem),t.\u0275\u0275advance(13),t.\u0275\u0275property("ngForOf",o.tipos),t.\u0275\u0275advance(12),t.\u0275\u0275property("ngIf",o.action!=o.routeAction.View),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",o.action==o.routeAction.View),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",o.action!=o.routeAction.View))},directives:[l.\u0275NgNoValidate,l.NgControlStatusGroup,I.Y,l.FormGroupDirective,y.Zp,l.DefaultValueAccessor,l.NgControlStatus,l.FormControlName,S.x,x.Vq,v.sg,x.Ip,l.NumberValueAccessor,v.O5,C.ix,T.dQ,E.w],styles:[""]}),n})();var D=i(5017),d=i(592),A=i(404),B=i(685),M=i(1686);const w=["tabela"];function $(n,a){1&n&&t.\u0275\u0275element(0,"div")}function k(n,a){if(1&n){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"tr")(1,"td"),t.\u0275\u0275text(2),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(3,"td"),t.\u0275\u0275text(4),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(5,"td"),t.\u0275\u0275text(6),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(7,"td"),t.\u0275\u0275text(8),t.\u0275\u0275pipe(9,"brDate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(10,"td",23)(11,"a",24),t.\u0275\u0275listener("click",function(){const s=t.\u0275\u0275restoreView(e).$implicit;return t.\u0275\u0275nextContext().edit(s)}),t.\u0275\u0275element(12,"span",25),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(13,"a",26),t.\u0275\u0275listener("click",function(){const s=t.\u0275\u0275restoreView(e).$implicit;return t.\u0275\u0275nextContext().remove(s)}),t.\u0275\u0275element(14,"span",27),t.\u0275\u0275elementEnd()()()}if(2&n){const e=a.$implicit;t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(null==e?null:e.nome),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(null==e?null:e.tipo),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(null==e?null:e.bonus),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(9,4,null==e?null:e.created))}}function Q(n,a){1&n&&t.\u0275\u0275element(0,"nz-empty",28),2&n&&t.\u0275\u0275property("nzNotFoundContent","Nenhum registro encontrado")}function R(n,a){if(1&n&&(t.\u0275\u0275elementStart(0,"div",31)(1,"span",32)(2,"strong"),t.\u0275\u0275text(3),t.\u0275\u0275elementEnd()()()),2&n){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(e.total)}}function O(n,a){if(1&n&&(t.\u0275\u0275elementStart(0,"div",29),t.\u0275\u0275template(1,R,4,1,"div",30),t.\u0275\u0275elementEnd()),2&n){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.dataSet.length)}}const G=function(){return["/item/insert"]},Y=function(){return{y:"200px",x:"max-content"}};let Z=(()=>{class n{constructor(e,o,r,s,p){this.formBuilder=e,this.route=o,this.router=r,this.notificationService=s,this.service=p,this.dataSet=[],this.loadingTabela=!1,this.activeTable=!1,this.total=0,this.actions=[],this.routePrevious="item",this.dateFormat="dd/MM/yyyy"}ngOnInit(){this.formFiltro=this.formBuilder.group({nome:[""]}),this.search()}buscarDados(){this.loadingTabela=!0,this.service.filter().subscribe({next:e=>{var o,r;e&&(this.dataSet=e,null===(r=null===(o=this.nzTableComponent)||void 0===o?void 0:o.cdkVirtualScrollViewport)||void 0===r||r.checkViewportSize(),this.total=this.dataSet.length)},complete:()=>this.loadingTabela=!1,error:()=>this.loadingTabela=!1})}clear(){this.formFiltro.reset()}search(){var e,o;null===(o=null===(e=this.nzTableComponent)||void 0===e?void 0:e.cdkVirtualScrollViewport)||void 0===o||o.scrollToIndex(0),this.filtro=this.formFiltro.value,this.buscarDados()}cancel(){this.router.navigate(["/home"])}remove(e){}edit(e){console.log(e),this.router.navigate([`/${this.routePrevious}/edit/${e.id}`])}trackByIndex(e,o){return o.id}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(l.FormBuilder),t.\u0275\u0275directiveInject(c.gz),t.\u0275\u0275directiveInject(c.F0),t.\u0275\u0275directiveInject(b.g),t.\u0275\u0275directiveInject(g.e))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["app-item-list"]],viewQuery:function(e,o){if(1&e&&t.\u0275\u0275viewQuery(w,5),2&e){let r;t.\u0275\u0275queryRefresh(r=t.\u0275\u0275loadQuery())&&(o.nzTableComponent=r.first)}},decls:45,vars:17,consts:[[4,"ngIf"],[1,"row"],[1,"col-12","d-flex","justify-content-between","mb-3"],[1,"mb-3"],["nz-button","","nzType","primary","type","submit","form","formFiltro","nzSize","default",1,"ms-2","rounded-pill",3,"routerLink"],["nz-icon","","nzType","plus-circle"],["id","formFiltro",3,"formGroup","ngSubmit"],[1,"col","mb-3"],["for","nome",1,"form-label"],["nz-input","","formControlName","nome","type","text"],[1,"d-flex","justify-content-end","mb-3"],["nz-button","","nzType","default","nzSize","default","type","button",1,"me-2","rounded-pill",3,"click"],["nz-button","","nzType","primary","type","submit","form","formFiltro","nzSize","default",1,"ms-2","rounded-pill"],[1,"col-12"],[1,"my-3"],["id","id-table-sistema",1,"col-md-12"],[1,"padrao",3,"nzData","nzNoResult","nzShowPagination","nzVirtualItemSize","nzVirtualForTrackBy","nzFrontPagination","nzScroll","nzLoading","nzFooter"],["tabela",""],["scope","col"],["scope","col","nzWidth","100px",1,"text-center"],["nz-virtual-scroll",""],["empty",""],["footerTabela",""],[1,"text-center"],["nz-button","","nzType","text","nzDanger","","nz-tooltip","","nzTooltipTitle","Editar",1,"pointer","px-2","fs-6",3,"click"],["nz-icon","","nzType","edit","nzTheme","outline"],["nz-button","","nzType","text","nzDanger","","nz-tooltip","","nzTooltipTitle","Excluir",1,"pointer","px-2","fs-6",3,"click"],["nz-icon","","nzType","delete","nzTheme","outline"],[3,"nzNotFoundContent"],[1,"d-flex","justify-content-end","align-items-center"],["class","me-4",4,"ngIf"],[1,"me-4"],[1,"azul-primario"]],template:function(e,o){if(1&e&&(t.\u0275\u0275template(0,$,1,0,"div",0),t.\u0275\u0275elementStart(1,"div")(2,"div",1)(3,"div",2)(4,"h4",3),t.\u0275\u0275text(5,"Lista de Itens"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(6,"button",4),t.\u0275\u0275element(7,"span",5),t.\u0275\u0275text(8," Cadastrar "),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(9,"form",6),t.\u0275\u0275listener("ngSubmit",function(){return o.search(),o.activeTable=!0}),t.\u0275\u0275elementStart(10,"div",7)(11,"label",8),t.\u0275\u0275text(12,"Nome"),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(13,"input",9),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(14,"div",10)(15,"button",11),t.\u0275\u0275listener("click",function(){return o.clear()}),t.\u0275\u0275text(16,"Limpar"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(17,"button",12),t.\u0275\u0275text(18,"Pesquisar"),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementStart(19,"div",13)(20,"h5",14),t.\u0275\u0275text(21,"Resultado da Consulta"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(22,"div",15)(23,"nz-table",16,17)(25,"thead")(26,"tr")(27,"th",18),t.\u0275\u0275text(28,"Nome"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(29,"th",18),t.\u0275\u0275text(30,"Tipo"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(31,"th",18),t.\u0275\u0275text(32,"B\xf4nus"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(33,"th",18),t.\u0275\u0275text(34,"Data de Cadastro"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(35,"th",19),t.\u0275\u0275text(36,"A\xe7\xf5es"),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementStart(37,"tbody"),t.\u0275\u0275template(38,k,15,6,"ng-template",20),t.\u0275\u0275elementEnd()(),t.\u0275\u0275template(39,Q,1,1,"ng-template",null,21,t.\u0275\u0275templateRefExtractor),t.\u0275\u0275template(41,O,2,1,"ng-template",null,22,t.\u0275\u0275templateRefExtractor),t.\u0275\u0275elementEnd()()()(),t.\u0275\u0275elementStart(43,"div"),t.\u0275\u0275element(44,"router-outlet"),t.\u0275\u0275elementEnd()),2&e){const r=t.\u0275\u0275reference(40),s=t.\u0275\u0275reference(42);t.\u0275\u0275property("ngIf",0===o.route.children.length),t.\u0275\u0275advance(1),t.\u0275\u0275classProp("d-none",0!==(null==o.route.children?null:o.route.children.length)),t.\u0275\u0275advance(5),t.\u0275\u0275property("routerLink",t.\u0275\u0275pureFunction0(15,G)),t.\u0275\u0275advance(3),t.\u0275\u0275property("formGroup",o.formFiltro),t.\u0275\u0275advance(14),t.\u0275\u0275property("nzData",o.dataSet)("nzNoResult",r)("nzShowPagination",!1)("nzVirtualItemSize",54)("nzVirtualForTrackBy",o.trackByIndex)("nzFrontPagination",!1)("nzShowPagination",!1)("nzScroll",t.\u0275\u0275pureFunction0(16,Y))("nzLoading",o.loadingTabela)("nzFooter",s)}},directives:[v.O5,C.ix,T.dQ,E.w,c.rH,D.Ls,l.\u0275NgNoValidate,l.NgControlStatusGroup,I.Y,l.FormGroupDirective,y.Zp,l.DefaultValueAccessor,l.NgControlStatus,l.FormControlName,S.x,d.N8,d.Om,d.$Z,d.Uo,d._C,d.p0,d.zu,A.SY,B.p9,c.lC],pipes:[M.F],styles:[""]}),n})();var u=i(2747),h=i(1235);const H=[{path:"",component:Z,canActivate:[f.P,h.DD],data:{breadcrumb:"Lista",acao:m.c.Insert,permissions:{only:[u.$.Adm,u.$.Moderador],redirectTo:"/"}},children:[{path:"insert",component:F,canActivate:[f.P,h.DD],data:{acao:m.c.Insert,permissions:{only:[u.$.Adm,u.$.Moderador],redirectTo:"/"}}},{path:"edit/:param",component:F,canActivate:[f.P,h.DD],data:{acao:m.c.Edit,permissions:{only:[u.$.Adm,u.$.Moderador],redirectTo:"/"}}}]}];let U=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=t.\u0275\u0275defineInjector({imports:[[c.Bz.forChild(H)],c.Bz]}),n})();var W=i(363);let J=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=t.\u0275\u0275defineInjector({imports:[[W.m,U]]}),n})()}}]);