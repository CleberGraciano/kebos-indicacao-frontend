"use strict";(self.webpackChunkkebos_app=self.webpackChunkkebos_app||[]).push([[147],{6147:(Ee,T,l)=>{l.r(T),l.d(T,{RecommendationModule:()=>ge});var j=l(6602),p=l(5546),d=l(3275),_=l(1265),s=l(3075),b=l(1386),e=l(5e3),I=l(6529),g=l(1645),B=l(2817),S=l(4920),D=l(6766),$=l(8447),M=l(4352),C=l(5270),A=l(1047),y=l(9359),Q=l(7795),v=l(8054),h=l(9808),E=l(6042),R=l(2643),F=l(2683),c=l(592),V=l(404),G=l(2121),w=l(5017),O=l(685);const H=["formElement"];function U(o,r){if(1&o&&e.\u0275\u0275element(0,"nz-option",39),2&o){const t=r.$implicit;e.\u0275\u0275property("nzLabel",t.nome)("nzValue",t)}}function Y(o,r){if(1&o){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",40),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().addRow()}),e.\u0275\u0275text(1,"Adicionar Items"),e.\u0275\u0275elementEnd()}}function K(o,r){if(1&o&&e.\u0275\u0275element(0,"nz-option",39),2&o){const t=r.$implicit;e.\u0275\u0275property("nzLabel",t.nome)("nzValue",t)}}function Z(o,r){if(1&o&&e.\u0275\u0275element(0,"nz-option",39),2&o){const t=r.$implicit;e.\u0275\u0275property("nzLabel",t.nome)("nzValue",t)}}function J(o,r){if(1&o){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"tr",41)(1,"td"),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"td")(4,"div",42),e.\u0275\u0275listener("click",function(){const a=e.\u0275\u0275restoreView(t).$implicit;return e.\u0275\u0275nextContext().startEdit(a.id)}),e.\u0275\u0275text(5),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"nz-select",43),e.\u0275\u0275listener("ngModelChange",function(i){return e.\u0275\u0275restoreView(t).$implicit.tipo.name=i})("blur",function(){const a=e.\u0275\u0275restoreView(t).$implicit;return e.\u0275\u0275nextContext().stopEdit(a.id)})("click",function(){const a=e.\u0275\u0275restoreView(t).$implicit;return e.\u0275\u0275nextContext().resetItensData(a)}),e.\u0275\u0275template(7,K,1,2,"nz-option",20),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(8,"td")(9,"div",42),e.\u0275\u0275listener("click",function(){const a=e.\u0275\u0275restoreView(t).$implicit;return e.\u0275\u0275nextContext().startEdit(a.id)}),e.\u0275\u0275text(10),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"nz-select",44),e.\u0275\u0275listener("nzOnSearch",function(){const a=e.\u0275\u0275restoreView(t).$implicit;return e.\u0275\u0275nextContext().searchValue(a)})("ngModelChange",function(i){return e.\u0275\u0275restoreView(t).$implicit.nome=i})("blur",function(){const a=e.\u0275\u0275restoreView(t).$implicit;return e.\u0275\u0275nextContext().stopEdit(a.id)})("click",function(){const a=e.\u0275\u0275restoreView(t).$implicit;return e.\u0275\u0275nextContext().typeSelectData(a)}),e.\u0275\u0275template(12,Z,1,2,"nz-option",20),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(13,"td")(14,"div",42),e.\u0275\u0275listener("click",function(){const a=e.\u0275\u0275restoreView(t).$implicit;return e.\u0275\u0275nextContext().startEdit(a.id)}),e.\u0275\u0275text(15),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(16,"input",45),e.\u0275\u0275listener("ngModelChange",function(i){return e.\u0275\u0275restoreView(t).$implicit.quantidade=i})("change",function(){const a=e.\u0275\u0275restoreView(t).$implicit;return e.\u0275\u0275nextContext().updateTotalBonus(a.id)}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(17,"td"),e.\u0275\u0275text(18),e.\u0275\u0275pipe(19,"currency"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(20,"td"),e.\u0275\u0275text(21),e.\u0275\u0275pipe(22,"currency"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(23,"td",46)(24,"a",47),e.\u0275\u0275listener("nzOnConfirm",function(){const a=e.\u0275\u0275restoreView(t).$implicit;return e.\u0275\u0275nextContext().deleteRow(a.id)}),e.\u0275\u0275element(25,"span",48),e.\u0275\u0275elementEnd()()()}if(2&o){const t=r.$implicit,n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.id),e.\u0275\u0275advance(2),e.\u0275\u0275property("hidden",n.editId===t.id),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",null!=t&&null!=t.tipo&&t.tipo.name?null==t||null==t.tipo||null==t.tipo.name?null:t.tipo.name.nome:null==t||null==t.tipo||null==t.tipo.tipo?null:t.tipo.tipo.name," "),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngModel",t.tipo.name)("hidden",n.editId!==t.id),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",n.tipos),e.\u0275\u0275advance(2),e.\u0275\u0275property("hidden",n.editId===t.id||!(null!=t&&t.tipo)),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",null==t||null==t.nome?null:t.nome.nome," "),e.\u0275\u0275advance(1),e.\u0275\u0275property("nzShowArrow",!1)("nzFilterOption",n.nzFilterOption)("hidden",n.editId!==t.id)("ngModel",t.nome),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",n.listItems),e.\u0275\u0275advance(2),e.\u0275\u0275property("hidden",n.editId===t.id),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",t.quantidade," "),e.\u0275\u0275advance(1),e.\u0275\u0275property("hidden",n.editId!==t.id)("ngModel",t.quantidade),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind2(19,19,null==t||null==t.nome?null:t.nome.bonus,"BRL")),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind2(22,22,null==t?null:t.totalBonus,"BRL"))}}function W(o,r){1&o&&e.\u0275\u0275element(0,"nz-empty",49),2&o&&e.\u0275\u0275property("nzNotFoundContent","Nenhum item cadastrado")}function X(o,r){if(1&o&&(e.\u0275\u0275elementStart(0,"div",52)(1,"span",53),e.\u0275\u0275text(2,"Total do Pedido"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"span",54)(4,"strong"),e.\u0275\u0275text(5),e.\u0275\u0275pipe(6,"currency"),e.\u0275\u0275elementEnd()()()),2&o){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate1("R$ ",e.\u0275\u0275pipeBind2(6,1,t.total,"BRL"),"")}}function q(o,r){if(1&o&&(e.\u0275\u0275elementStart(0,"div",50),e.\u0275\u0275template(1,X,7,4,"div",51),e.\u0275\u0275elementEnd()),2&o){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.listOfData.length)}}function ee(o,r){if(1&o){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",55),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().cancel()}),e.\u0275\u0275text(1,"Cancelar"),e.\u0275\u0275elementEnd()}}function te(o,r){if(1&o){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",55),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().returnPage()}),e.\u0275\u0275text(1,"Voltar"),e.\u0275\u0275elementEnd()}}function ne(o,r){if(1&o){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",40),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().saveRecommendation()}),e.\u0275\u0275text(1,"Confirmar"),e.\u0275\u0275elementEnd()}}let P=(()=>{class o{constructor(t,n,i,a,m,u,z,Se,Ce,ye){this.formBuilder=t,this.formService=n,this.route=i,this.router=a,this.notificationService=m,this.sellerService=u,this.service=z,this.serviceItem=Se,this.categoryService=Ce,this.authenticationService=ye,this.routePrevious="Recommendation",this.routeAction=d.c,this.maskTEL={mask:b.K.telefone,guide:!1},this.maskCpfCnpj={mask:b.K.cpfCnpj,guide:!1},this.i=1,this.editId="",this.listOfData=[],this.tipos=[],this.items=[],this.selectedValue=null,this.listItems=[],this.listSellers=[],this.typeSelect=0,this.nzFilterOption=()=>!0,this.total=0}ngOnInit(){this.route.data.subscribe(t=>this.action=t.acao),this.route.params.subscribe(t=>this.param=Number(t.param)),this.create=this.action==d.c.Insert,this.edit=this.action==d.c.Edit,this.view=this.action==d.c.View,this.formRecommendation=this.formBuilder.group({nomePessoaEmpresa:["",s.Validators.required],cpfCnpj:["",s.Validators.required],emailprivate:["",s.Validators.required],nomeContato:["",s.Validators.required],telefone:["",s.Validators.required],seller:["",s.Validators.required]}),this.formObservacoes=this.formBuilder.group({observacao:[""]}),this.categoryService.filter().subscribe(t=>this.tipos=t),this.sellerService.filter().subscribe(t=>this.listSellers=t),this.action===d.c.Edit&&(this.param?this.service.getIdRecommendation(this.param).subscribe(t=>this.formRecommendation.patchValue(t)):this.returnPage())}saveRecommendation(){const t=this.formService.getValidationsMessages(this.formRecommendation,this.formElement);if(t.length)return this.notificationService.warn("Os seguintes campos abaixo devem ser preenchidos corretamente:",this.formService.createValidationList(t));if(this.formRecommendation.valid){const n=Object.assign(Object.assign({},this.formRecommendation.getRawValue()),this.formObservacoes.getRawValue());switch(n.items=this.replaceItems(),n.valortotal=this.total,n.user=null,this.action){case d.c.Insert:this.service.insertRecommendation(n).subscribe(i=>{this.notificationService.success("Cadastro realizado com sucesso!!!",""),this.returnPage()});break;case d.c.Edit:this.service.editRecommendation(this.param,n).subscribe(i=>{this.notificationService.success("Recomenda\xe7\xe3o editado com sucesso!!!",""),this.returnPage()})}}}cancel(){this.formRecommendation.reset(),this.returnPage()}returnPage(){this.router.navigate([`/${this.routePrevious.toLocaleLowerCase()}`],{queryParams:{param:!0}})}typeSelectData(t){var n,i;this.typeSelect=null===(i=null===(n=null==t?void 0:t.tipo)||void 0===n?void 0:n.name)||void 0===i?void 0:i.id,this.search(null,this.typeSelect)}resetItensData(t){return t.id=t.id,t.nome=null,t.totalBonus=0,t}startEdit(t){this.editId=t}stopEdit(t){this.editId="",this.editBonus(t)}updateTotalBonus(t){this.editBonus(t)}addRow(){this.listOfData=[...this.listOfData,{id:`${this.i}`,nome:{nome:"Pesquise o produto"},tipo:{tipo:{name:"Selecione o Tipo"}},quantidade:0,bonus:0,totalBonus:0}],this.i++}editBonus(t){this.listOfData.find(n=>{n.id==t&&(n.totalBonus=n.nome.bonus*n.quantidade)}),this.total=this.listOfData.reduce((n,i)=>n+i.totalBonus,0)}deleteRow(t){this.listOfData=this.listOfData.filter(n=>n.id!==t)}searchValue(t){this.search(t,this.typeSelect)}search(t,n){var i,a;this.serviceItem.getItems(null===(a=null===(i=null==t?void 0:t.tipo)||void 0===i?void 0:i.name)||void 0===a?void 0:a.id).subscribe(m=>{const u=[];m.filter(z=>z.category.id==n).forEach(z=>u.push(z)),this.listItems=u})}replaceItems(){let t=[];return this.listOfData.forEach(n=>{let i;i=n.nome,n.totalBonus&&(i.totalBonus=n.totalBonus),n.quantidade&&(i.quantidade=n.quantidade),t.push(i)}),t=t.filter(n=>n.totalBonus),t}get usuarioLogado(){return this.authenticationService.currentUserValue}}return o.\u0275fac=function(t){return new(t||o)(e.\u0275\u0275directiveInject(s.FormBuilder),e.\u0275\u0275directiveInject(I.o),e.\u0275\u0275directiveInject(p.gz),e.\u0275\u0275directiveInject(p.F0),e.\u0275\u0275directiveInject(g.g),e.\u0275\u0275directiveInject(B.n),e.\u0275\u0275directiveInject(S.Q),e.\u0275\u0275directiveInject(D.e),e.\u0275\u0275directiveInject($.H),e.\u0275\u0275directiveInject(M.$))},o.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["app-recommendation-form"]],viewQuery:function(t,n){if(1&t&&e.\u0275\u0275viewQuery(H,5),2&t){let i;e.\u0275\u0275queryRefresh(i=e.\u0275\u0275loadQuery())&&(n.formElement=i.first)}},decls:75,vars:14,consts:[[1,"row"],[1,"col-12","mb-4"],[1,"text-capitalize"],[1,"col-12","mb-3"],["id","formRecommendation","name","formRecommendation",3,"formGroup"],["formElement",""],[1,"row","row-cols-sm-2"],[1,"col","mb-3"],["for","nomePessoaEmpresa",1,"form-label"],["nz-input","","formControlName","nomePessoaEmpresa","type","text"],["for","cpfCnpj",1,"form-label"],["nz-input","","formControlName","cpfCnpj","type","text",3,"textMask"],["for","emailprivate",1,"form-label"],["nz-input","","formControlName","emailprivate","type","text"],["for","nomeContato",1,"form-label"],["nz-input","","formControlName","nomeContato","type","text"],["for","telefone",1,"form-label"],["nz-input","","formControlName","telefone","type","text",3,"textMask"],["for","seller",1,"form-label","col-12"],["nzShowSearch","","nzAllowClear","","nzPlaceHolder","Selecione o vendedor","formControlName","seller",1,"nz-select-custom"],[3,"nzLabel","nzValue",4,"ngFor","ngForOf"],[1,"col-12","d-flex","align-items-end","justify-content-between","mb-2"],["class","capitalize btn-kebos rounded-pill","nz-button","","nzType","primary","type","button","nzSize","default",3,"click",4,"ngIf"],["nzBordered","","nzFrontPagination","false",3,"nzData","nzFooter","nzNoResult"],["editRowTable",""],["width","20%"],["width","35%"],["width","11%"],["width","12%"],["width","10%",1,"text-center"],["class","editable-row",4,"ngFor","ngForOf"],["empty",""],["footerTabela",""],["id","formObservacoes","name","formObservacoes",3,"formGroup"],[1,"row","row-cols-1"],["for","observacao",1,"form-label"],["rows","4","nz-input","","formControlName","observacao"],[1,"col-12","d-flex","justify-content-end","mt-3"],["class","capitalize me-2 btn-kebos-line rounded-pill","nz-button","","nzType","default","type","button","nzSize","default",3,"click",4,"ngIf"],[3,"nzLabel","nzValue"],["nz-button","","nzType","primary","type","button","nzSize","default",1,"capitalize","btn-kebos","rounded-pill",3,"click"],[1,"editable-row"],[1,"editable-cell",3,"hidden","click"],["nzShowSearch","","nzAllowClear","","nzPlaceHolder","Selecione o tipo",3,"ngModel","hidden","ngModelChange","blur","click"],["nzShowSearch","","nzServerSearch","","nzPlaceHolder","Pesquise aqui",3,"nzShowArrow","nzFilterOption","hidden","ngModel","nzOnSearch","ngModelChange","blur","click"],["type","number","nz-input","","min","0",3,"hidden","ngModel","ngModelChange","change"],[1,"text-center"],["nz-button","","nzType","text","nzDanger","","nz-tooltip","","nzTooltipTitle","Remover","nz-popconfirm","","nzPopconfirmTitle","Deseja Remover?",1,"pointer","px-2","fs-6",3,"nzOnConfirm"],["nz-icon","","nzType","delete","nzTheme","outline"],[3,"nzNotFoundContent"],[1,"d-flex","justify-content-end","align-items-center"],["class","me-4 d-flex",4,"ngIf"],[1,"me-4","d-flex"],[1,"azul-primario"],[2,"font-size","16px","margin-top","-3px","padding-left","8px"],["nz-button","","nzType","default","type","button","nzSize","default",1,"capitalize","me-2","btn-kebos-line","rounded-pill",3,"click"]],template:function(t,n){if(1&t&&(e.\u0275\u0275elementStart(0,"div",0)(1,"h4",1)(2,"span",2),e.\u0275\u0275text(3),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(4,"div",0)(5,"div",3)(6,"form",4,5)(8,"div",6)(9,"div",7)(10,"label",8),e.\u0275\u0275text(11,"Nome"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(12,"input",9),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(13,"div",7)(14,"label",10),e.\u0275\u0275text(15,"CPF / CNPJ"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(16,"input",11),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(17,"div",7)(18,"label",12),e.\u0275\u0275text(19,"E-mail"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(20,"input",13),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(21,"div",7)(22,"label",14),e.\u0275\u0275text(23,"Nome do Contato"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(24,"input",15),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(25,"div",7)(26,"label",16),e.\u0275\u0275text(27,"Telefone"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(28,"input",17),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(29,"div",7)(30,"label",18),e.\u0275\u0275text(31,"Vendedor Kebos"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(32,"nz-select",19),e.\u0275\u0275template(33,U,1,2,"nz-option",20),e.\u0275\u0275elementEnd()()()()(),e.\u0275\u0275elementStart(34,"div",3)(35,"div",21)(36,"h6"),e.\u0275\u0275text(37,"Itens"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(38,Y,2,0,"button",22),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(39,"nz-table",23,24)(41,"thead")(42,"tr")(43,"th"),e.\u0275\u0275text(44,"Item"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(45,"th",25),e.\u0275\u0275text(46,"Categoria"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(47,"th",26),e.\u0275\u0275text(48,"Nome"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(49,"th",27),e.\u0275\u0275text(50,"Quantidade"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(51,"th",28),e.\u0275\u0275text(52,"Valor B\xf4nus"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(53,"th",28),e.\u0275\u0275text(54,"Total B\xf4nus"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(55,"th",29),e.\u0275\u0275text(56,"A\xe7\xe3o"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(57,"tbody"),e.\u0275\u0275template(58,J,26,25,"tr",30),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(59,W,1,1,"ng-template",null,31,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(61,q,2,1,"ng-template",null,32,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(63,"div",3)(64,"form",33,5)(66,"div",34)(67,"div",7)(68,"label",35),e.\u0275\u0275text(69,"Observa\xe7\xf5es"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(70,"textarea",36),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(71,"div",37),e.\u0275\u0275template(72,ee,2,0,"button",38),e.\u0275\u0275template(73,te,2,0,"button",38),e.\u0275\u0275template(74,ne,2,0,"button",22),e.\u0275\u0275elementEnd()()),2&t){const i=e.\u0275\u0275reference(40),a=e.\u0275\u0275reference(60),m=e.\u0275\u0275reference(62);e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1(" ",n.action==n.routeAction.Insert?"Cadastrar":n.action," Indica\xe7\xf5es "),e.\u0275\u0275advance(3),e.\u0275\u0275property("formGroup",n.formRecommendation),e.\u0275\u0275advance(10),e.\u0275\u0275property("textMask",n.maskCpfCnpj),e.\u0275\u0275advance(12),e.\u0275\u0275property("textMask",n.maskTEL),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngForOf",n.listSellers),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",n.action!=n.routeAction.View),e.\u0275\u0275advance(1),e.\u0275\u0275property("nzData",n.listOfData)("nzFooter",m)("nzNoResult",a),e.\u0275\u0275advance(19),e.\u0275\u0275property("ngForOf",i.data),e.\u0275\u0275advance(6),e.\u0275\u0275property("formGroup",n.formObservacoes),e.\u0275\u0275advance(8),e.\u0275\u0275property("ngIf",n.action!=n.routeAction.View),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.action==n.routeAction.View),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.action!=n.routeAction.View)}},directives:[s.\u0275NgNoValidate,s.NgControlStatusGroup,C.Y,s.FormGroupDirective,A.Zp,s.DefaultValueAccessor,s.NgControlStatus,s.FormControlName,y.x,Q.hd,v.Vq,h.sg,v.Ip,h.O5,E.ix,R.dQ,F.w,c.N8,c.Om,c.$Z,c.Uo,c._C,c.p0,s.NgModel,s.MinValidator,s.NumberValueAccessor,V.SY,G.JW,w.Ls,O.p9],pipes:[h.H9],styles:[""]}),o})();var k=l(4865),N=l(1686);const oe=["tabela"];function ie(o,r){1&o&&e.\u0275\u0275element(0,"div")}function re(o,r){if(1&o&&e.\u0275\u0275element(0,"nz-option",25),2&o){const t=r.$implicit;e.\u0275\u0275property("nzLabel",t.name)("nzValue",t.value)}}function ae(o,r){if(1&o){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"tr")(1,"td"),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"td"),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"td"),e.\u0275\u0275text(6),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"td"),e.\u0275\u0275text(8),e.\u0275\u0275pipe(9,"telefone"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"td"),e.\u0275\u0275text(11),e.\u0275\u0275pipe(12,"brDate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(13,"td",26)(14,"a",27),e.\u0275\u0275listener("click",function(){const a=e.\u0275\u0275restoreView(t).$implicit;return e.\u0275\u0275nextContext().editStatus(a)}),e.\u0275\u0275element(15,"span",28),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(16,"a",29),e.\u0275\u0275listener("click",function(){const a=e.\u0275\u0275restoreView(t).$implicit;return e.\u0275\u0275nextContext().viewItem(a)}),e.\u0275\u0275element(17,"span",30),e.\u0275\u0275elementEnd()()()}if(2&o){const t=r.$implicit;e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.id),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.nomePessoaEmpresa),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.email),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(9,5,t.telefone)),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(12,7,t.createdDate))}}function le(o,r){1&o&&e.\u0275\u0275element(0,"nz-empty",31),2&o&&e.\u0275\u0275property("nzNotFoundContent","Nenhum registro encontrado")}function me(o,r){if(1&o&&(e.\u0275\u0275elementStart(0,"div",34)(1,"span",35)(2,"strong"),e.\u0275\u0275text(3),e.\u0275\u0275elementEnd()()()),2&o){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(t.total)}}function se(o,r){if(1&o&&(e.\u0275\u0275elementStart(0,"div",32),e.\u0275\u0275template(1,me,4,1,"div",33),e.\u0275\u0275elementEnd()),2&o){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.dataSet.length)}}const ce=function(){return["/recommendation/insert"]},de=function(){return{y:"500px",x:"max-content"}};let ue=(()=>{class o{constructor(t,n,i,a,m){this.formBuilder=t,this.route=n,this.router=i,this.notificationService=a,this.service=m,this.dataSet=[],this.loadingTabela=!1,this.activeTable=!1,this.total=0,this.actions=[],this.routePrevious="recommendation",this.dateFormat="dd/MM/yyyy",this.maskTEL={mask:b.K.telefone,guide:!1},this.statusSelect="ENVIADO",this.listStatusRecommendation=[],this.route.queryParams.subscribe(u=>u&&this.buscarDados())}ngOnInit(){this.formFiltroRecommendation=this.formBuilder.group({nomePessoaEmpresa:[""],emailprivate:[""],telefone:[""],status:["ENVIADO"]}),this.search(),this.service.getStatusRecommendation().subscribe(t=>this.listStatusRecommendation=t)}buscarDados(){var t,n;this.loadingTabela=!0;const i=null===(n=null===(t=this.formFiltroRecommendation)||void 0===t?void 0:t.controls.status)||void 0===n?void 0:n.value;i&&this.service.getListRecommendation(i).subscribe({next:a=>{var m,u;a&&(this.dataSet=a,null===(u=null===(m=this.nzTableComponent)||void 0===m?void 0:m.cdkVirtualScrollViewport)||void 0===u||u.checkViewportSize(),this.total=this.dataSet.length)},complete:()=>this.loadingTabela=!1,error:()=>this.loadingTabela=!1})}clear(){this.formFiltroRecommendation.reset()}search(){var t,n;null===(n=null===(t=this.nzTableComponent)||void 0===t?void 0:t.cdkVirtualScrollViewport)||void 0===n||n.scrollToIndex(0),this.filtro=this.formFiltroRecommendation.value,this.buscarDados()}cancel(){this.router.navigate(["/home"])}remove(t){}editStatus(t){this.dataSet=[],this.router.navigate([`/${this.routePrevious}/status/edit/${t.id}`])}viewItem(t){this.dataSet=[],this.router.navigate([`/${this.routePrevious}/view/${t.id}`])}trackByIndex(t,n){return n.id}}return o.\u0275fac=function(t){return new(t||o)(e.\u0275\u0275directiveInject(s.FormBuilder),e.\u0275\u0275directiveInject(p.gz),e.\u0275\u0275directiveInject(p.F0),e.\u0275\u0275directiveInject(g.g),e.\u0275\u0275directiveInject(S.Q))},o.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["app-recommendation-list"]],viewQuery:function(t,n){if(1&t&&e.\u0275\u0275viewQuery(oe,5),2&t){let i;e.\u0275\u0275queryRefresh(i=e.\u0275\u0275loadQuery())&&(n.nzTableComponent=i.first)}},decls:49,vars:18,consts:[[4,"ngIf"],[1,"row"],[1,"col-12","d-flex","justify-content-between","mb-3"],[1,"mb-3","title"],["nz-button","","nzType","primary","type","submit","form","formFiltro","nzSize","default",1,"ms-2","rounded-pill","btn-text",3,"routerLink"],["nz-icon","","nzType","plus-circle"],["id","formFiltroRecommendation",3,"formGroup","ngSubmit"],[1,"row","row-cols-sm-1"],[1,"col"],["for","status",1,"form-label"],["nzShowSearch","","nzAllowClear","","nzPlaceHolder","Selecione o Status","formControlName","status",1,"col-12"],[3,"nzLabel","nzValue",4,"ngFor","ngForOf"],[1,"d-flex","justify-content-end","mt-2","mb-3"],["nz-button","","nzType","default","nzSize","default","type","button",1,"me-2","rounded-pill",3,"click"],["nz-button","","nzType","primary","type","submit","form","formFiltroRecommendation","nzSize","default",1,"ms-2","rounded-pill"],[1,"col-12"],[1,"my-3"],["id","id-table-sistema",1,"col-md-12"],[1,"padrao",3,"nzData","nzNoResult","nzShowPagination","nzVirtualItemSize","nzVirtualForTrackBy","nzFrontPagination","nzScroll","nzLoading","nzFooter"],["tabela",""],["scope","col"],["scope","col","nzWidth","100px",1,"text-center"],["nz-virtual-scroll",""],["empty",""],["footerTabela",""],[3,"nzLabel","nzValue"],[1,"text-center","actions"],["nz-button","","nzType","text","nzDanger","","nz-tooltip","","nzTooltipTitle","Alterar Status",1,"pointer","px-2","fs-6",3,"click"],["nz-icon","","nzType","edit","nzTheme","outline"],["nz-button","","nzType","text","nzDanger","","nz-tooltip","","nzTooltipTitle","Visualizar",1,"pointer","px-2","fs-6",3,"click"],["nz-icon","","nzType","eye","nzTheme","outline"],[3,"nzNotFoundContent"],[1,"d-flex","justify-content-end","align-items-center"],["class","me-4",4,"ngIf"],[1,"me-4"],[1,"azul-primario"]],template:function(t,n){if(1&t&&(e.\u0275\u0275template(0,ie,1,0,"div",0),e.\u0275\u0275elementStart(1,"div")(2,"div",1)(3,"div",2)(4,"h4",3),e.\u0275\u0275text(5,"Lista de Indica\xe7\xf5es"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"button",4),e.\u0275\u0275element(7,"span",5),e.\u0275\u0275text(8," Cadastrar "),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(9,"form",6),e.\u0275\u0275listener("ngSubmit",function(){return n.search()}),e.\u0275\u0275elementStart(10,"div",7)(11,"div",8)(12,"label",9),e.\u0275\u0275text(13,"Selecione o Status"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(14,"nz-select",10),e.\u0275\u0275template(15,re,1,2,"nz-option",11),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(16,"div",12)(17,"button",13),e.\u0275\u0275listener("click",function(){return n.clear()}),e.\u0275\u0275text(18,"Limpar"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(19,"button",14),e.\u0275\u0275text(20,"Pesquisar"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(21,"div",15)(22,"h6",16),e.\u0275\u0275text(23,"Resultado da Consulta"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(24,"div",17)(25,"nz-table",18,19)(27,"thead")(28,"tr")(29,"th",20),e.\u0275\u0275text(30,"C\xf3digo"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(31,"th",20),e.\u0275\u0275text(32,"Nome"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(33,"th",20),e.\u0275\u0275text(34,"E-mail"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(35,"th",20),e.\u0275\u0275text(36,"Telefone"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(37,"th",20),e.\u0275\u0275text(38,"Data de Cadastro"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(39,"th",21),e.\u0275\u0275text(40,"A\xe7\xf5es"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(41,"tbody"),e.\u0275\u0275template(42,ae,18,9,"ng-template",22),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(43,le,1,1,"ng-template",null,23,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(45,se,2,1,"ng-template",null,24,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(47,"div"),e.\u0275\u0275element(48,"router-outlet"),e.\u0275\u0275elementEnd()),2&t){const i=e.\u0275\u0275reference(44),a=e.\u0275\u0275reference(46);e.\u0275\u0275property("ngIf",0===n.route.children.length),e.\u0275\u0275advance(1),e.\u0275\u0275classProp("d-none",0!==(null==n.route.children?null:n.route.children.length)),e.\u0275\u0275advance(5),e.\u0275\u0275property("routerLink",e.\u0275\u0275pureFunction0(16,ce)),e.\u0275\u0275advance(3),e.\u0275\u0275property("formGroup",n.formFiltroRecommendation),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngForOf",n.listStatusRecommendation),e.\u0275\u0275advance(10),e.\u0275\u0275property("nzData",n.dataSet)("nzNoResult",i)("nzShowPagination",!1)("nzVirtualItemSize",54)("nzVirtualForTrackBy",n.trackByIndex)("nzFrontPagination",!1)("nzShowPagination",!1)("nzScroll",e.\u0275\u0275pureFunction0(17,de))("nzLoading",n.loadingTabela)("nzFooter",a)}},directives:[h.O5,E.ix,R.dQ,F.w,p.rH,w.Ls,s.\u0275NgNoValidate,s.NgControlStatusGroup,C.Y,s.FormGroupDirective,v.Vq,s.NgControlStatus,s.FormControlName,y.x,h.sg,v.Ip,c.N8,c.Om,c.$Z,c.Uo,c._C,c.p0,c.zu,V.SY,O.p9,p.lC],pipes:[k.X,N.F],styles:[".actions[_ngcontent-%COMP%]{display:flex}"]}),o})();var x=l(1235),f=l(2747),L=l(3098);const pe=["formElement"];function fe(o,r){if(1&o&&e.\u0275\u0275element(0,"nz-option",20),2&o){const t=r.$implicit;e.\u0275\u0275property("nzLabel",t.name)("nzValue",t.value)}}function he(o,r){if(1&o){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",21),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().cancel()}),e.\u0275\u0275text(1,"Cancelar"),e.\u0275\u0275elementEnd()}}function ve(o,r){1&o&&(e.\u0275\u0275elementStart(0,"button",22),e.\u0275\u0275text(1,"Voltar"),e.\u0275\u0275elementEnd())}function ze(o,r){if(1&o){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",23),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().submit()}),e.\u0275\u0275text(1,"Confirmar"),e.\u0275\u0275elementEnd()}}const xe=[{path:"",component:ue,canActivate:[_.P],data:{breadcrumb:"Lista",acao:d.c.Insert,permissions:{only:[f.$.Adm,f.$.User,f.$.Moderador],redirectTo:"/"}},children:[{path:"insert",component:P,canActivate:[_.P,x.DD],data:{breadcrumb:"Cadastrar",acao:d.c.Insert,permissions:{only:[f.$.Adm,f.$.User],redirectTo:"/"}}},{path:"status/edit/:param",component:(()=>{class o{constructor(t,n,i,a,m,u){this.formBuilder=t,this.formService=n,this.route=i,this.router=a,this.notificationService=m,this.service=u,this.routePrevious="recommendation",this.routeAction=d.c,this.listStatusRecommendation=[]}ngOnInit(){this.route.params.subscribe(t=>this.param=t.param),this.recommendationStatusForm=this.formBuilder.group({statusRecommendationEnum:["",s.Validators.required]}),this.service.getStatusRecommendation().subscribe(t=>this.listStatusRecommendation=t),this.param&&this.service.getIdRecommendation(this.param).subscribe(t=>this.recommendation=t)}submit(){const t=this.formService.getValidationsMessages(this.recommendationStatusForm,this.formElement);if(t.length)this.notificationService.warn("Os seguintes campos abaixo devem ser preenchidos corretamente:",this.formService.createValidationList(t));else if(this.recommendationStatusForm.valid){let n=Object.assign({},this.recommendationStatusForm.getRawValue());this.service.editStatusRecommendation(n,this.param).subscribe(()=>{this.notificationService.success("Status alterado com com sucesso!!!",""),this.returnPage()})}}cancel(){this.recommendationStatusForm.reset(),this.returnPage()}returnPage(){this.router.navigate([`/${this.routePrevious}`],{queryParams:{param:!0}})}}return o.\u0275fac=function(t){return new(t||o)(e.\u0275\u0275directiveInject(s.FormBuilder),e.\u0275\u0275directiveInject(I.o),e.\u0275\u0275directiveInject(p.gz),e.\u0275\u0275directiveInject(p.F0),e.\u0275\u0275directiveInject(g.g),e.\u0275\u0275directiveInject(S.Q))},o.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["app-recommendation-status"]],viewQuery:function(t,n){if(1&t&&e.\u0275\u0275viewQuery(pe,5),2&t){let i;e.\u0275\u0275queryRefresh(i=e.\u0275\u0275loadQuery())&&(n.formElement=i.first)}},decls:31,vars:14,consts:[[1,"row"],[1,"col-12","mb-4"],[1,"text-capitalize"],["nzTitle","Informa\xe7\xf5es da Indica\xe7\xe3o"],["nzTitle","C\xf3digo"],["nzTitle","Nome Pessoa / Empresa"],["nzTitle","Email"],["nzTitle","Telefone"],["nzTitle","Data de Cria\xe7\xe3o"],[1,"col-12","my-3"],["id","recommendationStatusForm","name","recommendationStatusForm",3,"formGroup"],["formElement",""],[1,"row","row-cols-1"],[1,"col-12","mb-2"],["nzShowSearch","","nzAllowClear","","nzPlaceHolder","Selecione o Status","formControlName","statusRecommendationEnum",1,"col-12","col-sm-3"],[3,"nzLabel","nzValue",4,"ngFor","ngForOf"],[1,"col-12","d-flex","justify-content-end","mt-3"],["class","capitalize me-2 btn-kebos-line rounded-pill","nz-button","","nzType","default","type","button","nzSize","default",3,"click",4,"ngIf"],["class","capitalize me-2 btn-kebos-line rounded-pill","nz-button","","nzType","default","type","button","nzSize","default",4,"ngIf"],["class","capitalize btn-kebos rounded-pill","nz-button","","nzType","primary","type","button","nzSize","default","form","recommendationStatusForm",3,"click",4,"ngIf"],[3,"nzLabel","nzValue"],["nz-button","","nzType","default","type","button","nzSize","default",1,"capitalize","me-2","btn-kebos-line","rounded-pill",3,"click"],["nz-button","","nzType","default","type","button","nzSize","default",1,"capitalize","me-2","btn-kebos-line","rounded-pill"],["nz-button","","nzType","primary","type","button","nzSize","default","form","recommendationStatusForm",1,"capitalize","btn-kebos","rounded-pill",3,"click"]],template:function(t,n){1&t&&(e.\u0275\u0275elementStart(0,"div",0)(1,"h4",1)(2,"span",2),e.\u0275\u0275text(3," Editar Status "),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(4,"div",0)(5,"div")(6,"nz-descriptions",3)(7,"nz-descriptions-item",4),e.\u0275\u0275text(8),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"nz-descriptions-item",5),e.\u0275\u0275text(10),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"nz-descriptions-item",6),e.\u0275\u0275text(12),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(13,"nz-descriptions-item",7),e.\u0275\u0275text(14),e.\u0275\u0275pipe(15,"telefone"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(16,"nz-descriptions-item",8),e.\u0275\u0275text(17),e.\u0275\u0275pipe(18,"brDate"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(19,"div",9)(20,"form",10,11)(22,"div",12)(23,"label",13),e.\u0275\u0275text(24,"Editar Status"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(25,"nz-select",14),e.\u0275\u0275template(26,fe,1,2,"nz-option",15),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(27,"div",16),e.\u0275\u0275template(28,he,2,0,"button",17),e.\u0275\u0275template(29,ve,2,0,"button",18),e.\u0275\u0275template(30,ze,2,0,"button",19),e.\u0275\u0275elementEnd()()),2&t&&(e.\u0275\u0275advance(8),e.\u0275\u0275textInterpolate(null==n.recommendation?null:n.recommendation.id),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(null==n.recommendation?null:n.recommendation.nomePessoaEmpresa),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(null==n.recommendation?null:n.recommendation.email),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(15,10,null==n.recommendation?null:n.recommendation.telefone)),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(18,12,null==n.recommendation?null:n.recommendation.createdDate)),e.\u0275\u0275advance(3),e.\u0275\u0275property("formGroup",n.recommendationStatusForm),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngForOf",n.listStatusRecommendation),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",n.action!=n.routeAction.View),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.action==n.routeAction.View),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.action!=n.routeAction.View))},directives:[L.R7,L.uj,s.\u0275NgNoValidate,s.NgControlStatusGroup,C.Y,s.FormGroupDirective,v.Vq,s.NgControlStatus,s.FormControlName,y.x,h.sg,v.Ip,h.O5,E.ix,R.dQ,F.w],pipes:[k.X,N.F],styles:[""]}),o})(),canActivate:[_.P,x.DD],data:{breadcrumb:"Editar",acao:d.c.Edit,permissions:{only:[f.$.Adm,f.$.Moderador],redirectTo:"/"}}},{path:"view/:param",component:P,canActivate:[_.P,x.DD],data:{breadcrumb:"Visualizar",acao:d.c.View,permissions:{only:[f.$.Adm,f.$.Moderador],redirectTo:"/"}}}]}];let be=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.\u0275\u0275defineNgModule({type:o}),o.\u0275inj=e.\u0275\u0275defineInjector({imports:[[p.Bz.forChild(xe)],p.Bz]}),o})(),ge=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.\u0275\u0275defineNgModule({type:o}),o.\u0275inj=e.\u0275\u0275defineInjector({imports:[[j.m,be,x.VI.forChild()]]}),o})()}}]);